---
- name: set facts
  set_fact:
    ibip: "{{ ansible_eth2['ipv4'].address }}"

- name: synchronize source from local directory to remote directories
  synchronize:
    src: "{{ hydra_home }}"
    dest: "{{ hydra_home | dirname }}"

- name: compile resource monitor
  shell: make
  args:
    chdir: "{{ hydra_home }}/resource_monitor"
    
- name: start resource monitor
  shell: "./resource_monitor {{ ibip }} 9400"
  args:
    chdir: "{{ hydra_home }}/resource_monitor"